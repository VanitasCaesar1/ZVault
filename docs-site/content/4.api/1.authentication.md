---
title: Authentication
description: How authentication works in the ZVault HTTP API.
---

All authenticated API requests require an `X-Vault-Token` header.

## Token Authentication

```bash
curl -H "X-Vault-Token: hvs.your-token-here" \
  http://127.0.0.1:8200/v1/secret/data/myapp/config
```

## Getting a Token

### Root Token

Generated during `zvault init`. Use it to bootstrap other tokens, then revoke it.

### Child Tokens

Create scoped tokens with specific policies and TTLs:

```bash
# CLI
zvault token create --policies=readonly --ttl=1h

# API
curl -X POST -H "X-Vault-Token: $VAULT_TOKEN" \
  -d '{"policies": ["readonly"], "ttl": "1h"}' \
  http://127.0.0.1:8200/v1/auth/token/create
```

Response:
```json
{
  "client_token": "hvs.new-token-here",
  "policies": ["readonly"],
  "renewable": true,
  "lease_duration": 3600
}
```

### AppRole Login

For machine-to-machine authentication:

```bash
curl -X POST \
  -d '{"role_id": "abc-123", "secret_id": "def-456"}' \
  http://127.0.0.1:8200/v1/auth/approle/login
```

## Token Lookup

Check the current token's metadata:

```bash
curl -X POST -H "X-Vault-Token: $VAULT_TOKEN" \
  http://127.0.0.1:8200/v1/auth/token/lookup-self
```

Response:
```json
{
  "token_hash": "sha256:abc123...",
  "policies": ["default", "readonly"],
  "display_name": "token",
  "expires_at": "2026-02-12T10:00:00Z"
}
```

## Unauthenticated Endpoints

These endpoints do not require a token:

| Endpoint | Description |
|----------|-------------|
| `GET /v1/sys/health` | Health check (sealed/unsealed) |
| `POST /v1/sys/init` | Initialize the vault |
| `POST /v1/sys/unseal` | Submit an unseal share |
| `POST /v1/auth/approle/login` | AppRole login |

## Security Notes

- Tokens are hashed with SHA-256 before storage — plaintext tokens are never persisted
- Token comparison uses constant-time equality to prevent timing attacks
- Root tokens should be short-lived — create scoped tokens and revoke the root
