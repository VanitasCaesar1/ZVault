---
const plans = [
  {
    tier: 'Free',
    tagline: 'For Individual Developers',
    price: '$0',
    period: '',
    billing: 'Free forever',
    features: [
      'Local encrypted vault (AES-256-GCM)',
      'CLI — init, import, run, seal/unseal',
      '.env import → encrypted vault',
      'KV + Transit + PKI engines',
      "Shamir's Secret Sharing",
      'Web dashboard',
      'Audit logging',
      '1 project',
    ],
    cta: 'Install Free',
    href: 'https://docs.zvault.cloud/getting-started/installation',
    featured: false,
  },
  {
    tier: 'Pro',
    tagline: 'For AI-First Developers',
    price: '$8',
    period: '/dev/mo',
    billing: 'Billed Monthly',
    badge: 'Most Popular',
    features: [
      'Everything in Free',
      'MCP server (7 AI tools)',
      'zvault:// secret references',
      'IDE setup — Cursor, Kiro, Continue',
      'llms.txt generation',
      '.env.example AI generation',
      'Secret search from IDE',
      '5 projects',
      'Priority email support',
    ],
    cta: 'Get Started Now',
    href: '/api/checkout?products=49f34606-431c-4215-a0c9-19ea745e5a93',
    featured: true,
  },
  {
    tier: 'Team',
    tagline: 'For Engineering Teams',
    price: '$19',
    period: '/dev/mo',
    billing: 'Billed Monthly',
    features: [
      'Everything in Pro',
      'Shared vaults',
      'OIDC / SSO',
      'RBAC with path-based policies',
      'Audit log export (JSON, CSV)',
      'Slack / Discord alerts',
      'Webhook notifications',
      'Unlimited projects',
    ],
    cta: 'Get Started Now',
    href: '/api/checkout?products=c42a3bec-5db8-4cf2-b9c6-48416604353e',
    featured: false,
  },
];
---

<section class="py-24 relative overflow-hidden" id="pricing">
  <!-- Background glow -->
  <div class="absolute top-0 left-1/2 -translate-x-1/2 w-[800px] h-[500px] bg-accent/[0.03] rounded-full blur-[120px] pointer-events-none"></div>

  <div class="container relative">
    <!-- Header -->
    <div class="text-center mb-4">
      <div class="inline-flex items-center gap-2 text-xs font-semibold text-accent uppercase tracking-wider mb-4 px-3 py-1.5 rounded-full border border-accent/20 bg-accent/5">
        Simple pricing
      </div>
      <h2 class="text-3xl md:text-5xl font-bold tracking-tight mb-4">
        Flexible pricing to match<br class="hidden sm:block" /> your needs
      </h2>
      <p class="text-muted text-base max-w-lg mx-auto">
        Pay per developer who uses AI Mode. The vault itself is always free and open source.
      </p>
    </div>

    <p class="text-center text-dim text-xs mb-10">All prices billed monthly. Cancel anytime.</p>

    <!-- Cards -->
    <div class="pricing-grid">
      {plans.map((plan) => (
        <div class:list={['pricing-card', plan.featured && 'featured']}>
          {plan.badge && (
            <div class="badge">{plan.badge}</div>
          )}

          <!-- Tier name + tagline -->
          <div class="card-header">
            <h3 class="tier-name">{plan.tier}</h3>
            <p class="tier-tagline">{plan.tagline}</p>
          </div>

          <!-- Price -->
          <div class="price-row">
            <span class="price">{plan.price}</span>
            {plan.period && <span class="period">{plan.period}</span>}
          </div>
          <p class="billing">{plan.billing}</p>

          <!-- CTA -->
          <a href={plan.href} class:list={['cta-btn', plan.featured && 'cta-featured']}>
            {plan.cta}
          </a>

          <!-- Features -->
          <div class="features-section">
            <p class="features-label">What's Included</p>
            <ul class="features-list">
              {plan.features.map((f) => (
                <li>
                  <svg class="check-icon" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M3 8l3.5 3.5L13 5"/></svg>
                  <span>{f}</span>
                </li>
              ))}
            </ul>
          </div>
        </div>
      ))}
    </div>

    <!-- Enterprise callout -->
    <div class="enterprise-bar">
      <div class="enterprise-inner">
        <div>
          <h4 class="enterprise-title">Enterprise</h4>
          <p class="enterprise-desc">HA clustering, K8s operator, namespaces, Terraform provider, SLA guarantee, dedicated support.</p>
        </div>
        <a href="mailto:enterprise@zvault.cloud" class="enterprise-cta">Contact Sales →</a>
      </div>
    </div>

    <!-- Trust row -->
    <div class="flex flex-wrap items-center justify-center gap-x-6 gap-y-2 text-dim text-xs mt-10">
      <span class="flex items-center gap-1.5"><svg class="w-3 h-3 text-green" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M3 8l3.5 3.5L13 5"/></svg> No credit card for free tier</span>
      <span class="flex items-center gap-1.5"><svg class="w-3 h-3 text-green" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M3 8l3.5 3.5L13 5"/></svg> MIT licensed — self-host free</span>
      <span class="flex items-center gap-1.5"><svg class="w-3 h-3 text-green" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M3 8l3.5 3.5L13 5"/></svg> Cancel anytime, keep your vault</span>
      <span class="flex items-center gap-1.5"><svg class="w-3 h-3 text-green" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M3 8l3.5 3.5L13 5"/></svg> Secrets never leave your machine</span>
    </div>
  </div>
</section>

<style>
  .pricing-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 1px;
    max-width: 960px;
    margin: 0 auto 2rem;
    background: #27272a;
    border-radius: 20px;
    overflow: hidden;
    border: 1px solid #27272a;
  }
  @media (min-width: 768px) {
    .pricing-grid {
      grid-template-columns: repeat(3, 1fr);
    }
  }

  .pricing-card {
    background: #111113;
    padding: 28px 24px;
    display: flex;
    flex-direction: column;
    position: relative;
  }
  .pricing-card.featured {
    background: linear-gradient(180deg, rgba(34,211,238,0.04) 0%, #111113 40%);
  }

  .badge {
    position: absolute;
    top: 12px;
    right: 12px;
    font-size: 10px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: #0a0a0b;
    background: #22d3ee;
    padding: 3px 10px;
    border-radius: 20px;
  }

  .card-header { margin-bottom: 20px; }
  .tier-name { font-size: 18px; font-weight: 700; color: #fafafa; margin-bottom: 4px; }
  .tier-tagline { font-size: 13px; color: #71717a; }

  .price-row { display: flex; align-items: baseline; gap: 2px; margin-bottom: 2px; }
  .price { font-size: 36px; font-weight: 800; color: #fafafa; letter-spacing: -0.02em; }
  .period { font-size: 14px; color: #71717a; }
  .billing { font-size: 12px; color: #71717a; margin-bottom: 20px; }

  .cta-btn {
    display: block;
    width: 100%;
    text-align: center;
    padding: 12px 16px;
    border-radius: 999px;
    font-size: 14px;
    font-weight: 600;
    text-decoration: none;
    transition: all 0.2s;
    margin-bottom: 24px;
    border: 1px solid #27272a;
    background: transparent;
    color: #fafafa;
  }
  .cta-btn:hover {
    border-color: #22d3ee;
    color: #22d3ee;
  }
  .cta-featured {
    background: linear-gradient(135deg, #22d3ee, #4ade80);
    color: #0a0a0b;
    border-color: transparent;
  }
  .cta-featured:hover {
    opacity: 0.9;
    color: #0a0a0b;
  }

  .features-section { flex: 1; }
  .features-label {
    font-size: 13px;
    font-weight: 600;
    color: #a1a1aa;
    margin-bottom: 12px;
  }
  .features-list {
    list-style: none;
    padding: 0;
    margin: 0;
    display: flex;
    flex-direction: column;
    gap: 8px;
  }
  .features-list li {
    display: flex;
    align-items: flex-start;
    gap: 8px;
    font-size: 13px;
    color: #a1a1aa;
    line-height: 1.4;
  }
  .check-icon {
    width: 14px;
    height: 14px;
    flex-shrink: 0;
    margin-top: 2px;
    color: #4ade80;
  }
  .featured .check-icon { color: #22d3ee; }

  .enterprise-bar {
    max-width: 960px;
    margin: 0 auto;
  }
  .enterprise-inner {
    background: #111113;
    border: 1px solid #27272a;
    border-radius: 16px;
    padding: 24px 28px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 20px;
    flex-wrap: wrap;
  }
  .enterprise-title { font-size: 16px; font-weight: 700; color: #fafafa; margin-bottom: 4px; }
  .enterprise-desc { font-size: 13px; color: #71717a; max-width: 500px; line-height: 1.5; }
  .enterprise-cta {
    font-size: 13px;
    font-weight: 600;
    color: #a1a1aa;
    text-decoration: none;
    border: 1px solid #27272a;
    padding: 10px 20px;
    border-radius: 999px;
    white-space: nowrap;
    transition: all 0.2s;
  }
  .enterprise-cta:hover { border-color: #a78bfa; color: #a78bfa; }
</style>
