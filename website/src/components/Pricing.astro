---
const plans = [
  {
    tier: 'Free',
    price: '$0',
    period: '',
    desc: 'Everything you need to stop leaking secrets.',
    badge: null,
    highlight: 'Free forever',
    features: [
      'Local encrypted vault (AES-256-GCM)',
      'CLI — init, import, run, seal/unseal',
      '.env import → encrypted vault',
      'KV + Transit + PKI engines',
      'Shamir\'s Secret Sharing',
      'Web dashboard',
      'Audit logging',
      '1 project',
    ],
    notIncluded: [
      'AI Mode (MCP server)',
      'zvault:// references',
      'IDE integration',
    ],
    cta: 'Install Free',
    href: 'https://docs.zvault.cloud/getting-started/installation',
    featured: false,
    ctaStyle: 'secondary',
  },
  {
    tier: 'Pro',
    price: '$8',
    period: '/dev/mo',
    desc: 'For developers using AI coding tools daily.',
    badge: 'Most Popular',
    highlight: 'AI Mode unlocked',
    features: [
      'Everything in Free',
      'MCP server (7 AI tools)',
      'zvault:// secret references',
      'IDE setup — Cursor, Kiro, Continue',
      'llms.txt generation',
      '.env.example AI generation',
      'Secret search from IDE',
      '5 projects',
      'Priority email support',
    ],
    notIncluded: [],
    cta: 'Get Pro',
    href: '/api/checkout?products=49f34606-431c-4215-a0c9-19ea745e5a93',
    featured: true,
    ctaStyle: 'primary',
  },
  {
    tier: 'Team',
    price: '$19',
    period: '/dev/mo',
    desc: 'For startups sharing secrets across engineers.',
    badge: null,
    highlight: 'Collaboration',
    features: [
      'Everything in Pro',
      'Shared vaults',
      'OIDC / SSO',
      'RBAC with path-based policies',
      'Audit log export (JSON, CSV)',
      'Slack / Discord alerts',
      'Webhook notifications',
      'Unlimited projects',
    ],
    notIncluded: [],
    cta: 'Get Team',
    href: '/api/checkout?products=c42a3bec-5db8-4cf2-b9c6-48416604353e',
    featured: false,
    ctaStyle: 'primary',
  },
  {
    tier: 'Enterprise',
    price: '$49',
    period: '/dev/mo',
    desc: 'For security-conscious organizations at scale.',
    badge: null,
    highlight: 'Full platform',
    features: [
      'Everything in Team',
      'HA clustering (Raft consensus)',
      'Kubernetes operator',
      'Namespaces & multi-tenancy',
      'Terraform provider',
      'SLA guarantee',
      'Dedicated support engineer',
      'Custom integrations',
    ],
    notIncluded: [],
    cta: 'Contact Sales',
    href: 'mailto:enterprise@zvault.cloud',
    featured: false,
    ctaStyle: 'outline',
  },
];
---

<section class="py-24 relative overflow-hidden" id="pricing">
  <div class="absolute top-0 left-1/2 -translate-x-1/2 w-[600px] h-[400px] bg-accent/[0.03] rounded-full blur-[100px] pointer-events-none"></div>

  <div class="container relative">
    <div class="text-center mb-6">
      <div class="inline-flex items-center gap-2 text-xs font-semibold text-accent uppercase tracking-wider mb-4 px-3 py-1.5 rounded-full border border-accent/20 bg-accent/5">
        Simple pricing
      </div>
      <h2 class="text-3xl md:text-5xl font-bold tracking-tight mb-4">
        Free vault. <span class="gradient-text">$8/mo</span> for AI Mode.
      </h2>
      <p class="text-muted text-lg max-w-xl mx-auto">
        Pay per developer who uses AI Mode. Vault access via CLI or API is always free.
      </p>
    </div>

    <!-- Annual toggle hint -->
    <p class="text-center text-dim text-xs mb-10">All prices billed monthly. Cancel anytime.</p>

    <!-- Pricing cards -->
    <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-5 max-w-5xl mx-auto mb-14">
      {plans.map((plan) => (
        <div
          class:list={[
            'relative bg-bg-card border rounded-2xl p-5 flex flex-col transition-all duration-300',
            plan.featured
              ? 'border-accent/40 shadow-[0_0_40px_rgba(34,211,238,0.06)] lg:scale-[1.02]'
              : 'border-border hover:border-muted/30',
          ]}
        >
          {plan.badge && (
            <div class="absolute -top-3 left-1/2 -translate-x-1/2 bg-accent text-bg text-[10px] font-bold uppercase tracking-wider px-3 py-1 rounded-full whitespace-nowrap">
              {plan.badge}
            </div>
          )}

          <!-- Header -->
          <div class="mb-5">
            <div class="text-xs font-semibold text-muted uppercase tracking-wider mb-3">{plan.tier}</div>
            <div class="flex items-baseline gap-1 mb-1">
              <span class="text-3xl font-extrabold">{plan.price}</span>
              {plan.period && <span class="text-sm text-muted">{plan.period}</span>}
            </div>
            <p class="text-dim text-xs leading-relaxed">{plan.desc}</p>
          </div>

          <!-- Divider -->
          <div class="h-px bg-border/50 mb-4"></div>

          <!-- Features -->
          <ul class="flex-1 space-y-2 mb-5">
            {plan.features.map((f) => (
              <li class="flex items-start gap-2 text-[12px] leading-snug">
                <svg class="w-3.5 h-3.5 text-green mt-0.5 flex-shrink-0" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M3 8l3.5 3.5L13 5"/></svg>
                <span class="text-muted">{f}</span>
              </li>
            ))}
            {plan.notIncluded.map((f) => (
              <li class="flex items-start gap-2 text-[12px] leading-snug">
                <svg class="w-3.5 h-3.5 text-dim/30 mt-0.5 flex-shrink-0" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 8h8"/></svg>
                <span class="text-dim/50">{f}</span>
              </li>
            ))}
          </ul>

          <!-- CTA -->
          <a
            href={plan.href}
            class:list={[
              'block w-full text-center py-2.5 rounded-xl font-semibold text-sm transition-all',
              plan.ctaStyle === 'primary' && plan.featured
                ? 'bg-accent text-bg hover:bg-accent/90 hover:shadow-[0_0_20px_rgba(34,211,238,0.15)]'
                : plan.ctaStyle === 'primary'
                  ? 'bg-bg-card-hover border border-border text-white hover:border-accent/30'
                  : plan.ctaStyle === 'outline'
                    ? 'bg-transparent border border-border text-muted hover:border-accent/30 hover:text-white'
                    : 'bg-bg-card-hover border border-border text-white hover:border-accent/30',
            ]}
          >
            {plan.cta}
          </a>
        </div>
      ))}
    </div>

    <!-- Trust row -->
    <div class="flex flex-wrap items-center justify-center gap-x-6 gap-y-2 text-dim text-xs">
      <span class="flex items-center gap-1.5"><svg class="w-3 h-3 text-green" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M3 8l3.5 3.5L13 5"/></svg> No credit card for free tier</span>
      <span class="flex items-center gap-1.5"><svg class="w-3 h-3 text-green" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M3 8l3.5 3.5L13 5"/></svg> MIT licensed — self-host free</span>
      <span class="flex items-center gap-1.5"><svg class="w-3 h-3 text-green" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M3 8l3.5 3.5L13 5"/></svg> Cancel anytime, keep your vault</span>
      <span class="flex items-center gap-1.5"><svg class="w-3 h-3 text-green" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M3 8l3.5 3.5L13 5"/></svg> Secrets never leave your machine</span>
    </div>
  </div>
</section>
