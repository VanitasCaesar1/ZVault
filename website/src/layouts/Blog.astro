---
import Base from './Base.astro';
import Nav from '../components/Nav.astro';
import Footer from '../components/Footer.astro';

interface Props {
  title: string;
  description: string;
  publishDate: string;
  readTime?: string;
  author?: string;
  ogImage?: string;
}

const { title, description, publishDate, readTime = '5 min read', author = 'ZVault Team', ogImage } = Astro.props;

const formattedDate = new Date(publishDate).toLocaleDateString('en-US', {
  year: 'numeric',
  month: 'long',
  day: 'numeric',
});
---

<Base title={`${title} | ZVault Blog`} description={description} ogImage={ogImage}>
  <Nav />

  <article class="pt-32 pb-16">
    <div class="max-w-[720px] mx-auto px-6">
      <!-- Article header -->
      <header class="mb-12">
        <a href="/blog" class="inline-flex items-center gap-1.5 text-xs font-medium text-accent hover:text-accent/80 transition-colors mb-6">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
          Back to Blog
        </a>
        <div class="flex items-center gap-3 text-sm text-dim mb-4">
          <time datetime={publishDate}>{formattedDate}</time>
          <span class="w-1 h-1 rounded-full bg-dim/50"></span>
          <span>{readTime}</span>
          <span class="w-1 h-1 rounded-full bg-dim/50"></span>
          <span>{author}</span>
        </div>
        <h1 class="text-3xl md:text-[2.75rem] font-extrabold leading-[1.15] tracking-tight mb-5">{title}</h1>
        <p class="text-lg text-muted leading-relaxed">{description}</p>
      </header>

      <!-- Article body -->
      <div class="prose">
        <slot />
      </div>
    </div>
  </article>

  <Footer />
</Base>

<style is:global>
  /* Blog prose styles */
  .prose h2 {
    @apply text-2xl font-bold text-white mt-12 mb-4 tracking-tight;
  }
  .prose h3 {
    @apply text-lg font-semibold text-white mt-8 mb-3;
  }
  .prose p {
    @apply text-muted leading-relaxed mb-5 text-[1.02rem];
  }
  .prose strong {
    @apply text-white font-semibold;
  }
  .prose a {
    @apply text-accent hover:underline;
  }
  .prose ul, .prose ol {
    @apply text-muted mb-5 pl-6 space-y-2;
  }
  .prose li {
    @apply text-[1.02rem];
  }
  .prose ul li {
    @apply list-disc;
  }
  .prose ol li {
    @apply list-decimal;
  }
  .prose pre {
    @apply bg-bg-card border border-border rounded-xl p-5 mb-6 overflow-x-auto font-mono text-sm leading-relaxed text-muted;
  }
  .prose code {
    @apply font-mono text-[0.88em] bg-bg-card px-1.5 py-0.5 rounded text-accent;
  }
  .prose pre code {
    @apply bg-transparent p-0 text-inherit;
  }
  .prose blockquote {
    @apply border-l-2 border-accent/30 pl-5 my-6 text-muted italic;
  }
  .prose hr {
    @apply border-border my-10;
  }
  .prose .callout {
    @apply bg-accent/[0.06] border border-accent/15 rounded-xl p-5 mb-6;
  }
  .prose .callout p {
    @apply text-white mb-0;
  }
  .prose .install-box {
    @apply inline-flex items-center gap-3 bg-bg-card border border-border rounded-xl px-5 py-3 mb-6 font-mono text-sm text-muted;
  }
  .prose .install-box code {
    @apply text-accent bg-transparent p-0;
  }
</style>
